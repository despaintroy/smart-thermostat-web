(this["webpackJsonpsmart-thermostat-web"]=this["webpackJsonpsmart-thermostat-web"]||[]).push([[0],{60:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){"use strict";c.r(t);c(60);var n=c(1),a=c.n(n),r=c(40),s=c.n(r),i=c(68),o=c(54),d=c(55),l=Object(i.a)({apiKey:"AIzaSyAEqiutxiK9K41-zYltwLMIxNjMZvAq014",authDomain:"smart-thermostat-92710.firebaseapp.com",projectId:"smart-thermostat-92710",storageBucket:"smart-thermostat-92710.appspot.com",messagingSenderId:"31001839536",appId:"1:31001839536:web:a4c255c21db37087f37875"}),j=Object(o.a)(l),u=Object(d.b)(l),b=c(36),h=function(e){return e?{id:e.uid,name:e.displayName,email:e.email,phone:e.phoneNumber}:null},O=c(14),m=c(65),x=c(98),v=c(51),f=c(50),p={dashboard:"/dashboard",schedule:"/schedule",settings:"/settings",signIn:"/signin"},g=c(6);var N=function(){return Object(g.jsx)(v.a,{collapseOnSelect:!0,expand:"md",bg:"primary",variant:"dark",className:"mb-4",fixed:"top",children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)(f.LinkContainer,{to:p.dashboard,children:Object(g.jsx)(v.a.Brand,{href:p.dashboard,children:"Smart Thermostat"})}),Object(g.jsx)(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(g.jsx)(v.a.Collapse,{id:"responsive-navbar-nav",children:Object(g.jsxs)(x.a,{className:"me-auto",children:[Object(g.jsx)(f.LinkContainer,{to:p.dashboard,children:Object(g.jsx)(x.a.Link,{children:"Dashboard"})}),Object(g.jsx)(f.LinkContainer,{to:p.schedule,children:Object(g.jsx)(x.a.Link,{children:"Schedule"})}),Object(g.jsx)(f.LinkContainer,{to:p.settings,children:Object(g.jsx)(x.a.Link,{children:"Settings"})})]})})]})})},w=c(41),S=c(16),y=c(30),C="setState/",L=Object(y.e)(u,C);var k=function(e){var t=e.children;return Object(g.jsx)("div",{className:"dial dial-circle",children:Object(g.jsx)("div",{className:"circle__inner",children:Object(g.jsx)("div",{className:"circle__wrapper",children:Object(g.jsx)("div",{className:"circle__content",children:t})})})})};var T=function(){var e=Object(n.useState)(),t=Object(O.a)(e,2),c=t[0],a=t[1],r=65,s="6:00pm";Object(n.useEffect)((function(){Object(y.b)(Object(d.a)(Object(y.e)(u),C)).then((function(e){return e.exists()?Promise.resolve(e.val()):Promise.reject()})).catch((function(){return Promise.reject()})).then((function(e){return a(e.setTemp)})).catch((function(){return console.error("error getting setTemp")}))}),[]),Object(y.d)(L,(function(e){var t=e.val();c!==t.setTemp&&a(t.setTemp)}));var i=function(e){var t;c&&(t={setTemp:e,useSchedule:!0,timeStamp:(new Date).getTime()},Object(y.f)(L,t))};return void 0===c?Object(g.jsx)(k,{children:" "}):Object(g.jsx)(k,{children:Object(g.jsxs)("div",{className:"dial-stack",children:[Object(g.jsx)("div",{className:"adjust-button up",onClick:function(){return i(c+1)},children:"\u2191"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"text-secondary",children:"SET TO"}),Object(g.jsxs)("div",{className:"set-temp",children:[c,"\xba"]}),Object(g.jsxs)("div",{className:"text-muted mt-3",children:["Scheduled change to ",r,"\xba",Object(g.jsx)("br",{}),"at ",s]})]}),Object(g.jsx)("div",{className:"adjust-button down",onClick:function(){return i(c-1)},children:"\u2193"})]})})},I=c(32),P=c(45),A=c(100),E=c(94),U=c(73),D=["className"];var G,_=function(e){var t=e.className,c=Object(P.a)(e,D);return Object(g.jsxs)(A.a,Object(I.a)(Object(I.a)({className:"content-card ".concat(t)},c),{},{children:[Object(g.jsx)(A.a.Header,{children:"Indoor"}),Object(g.jsxs)(A.a.Body,{children:[Object(g.jsxs)(E.a,{children:[Object(g.jsx)(U.a,{children:"Temperature:"}),Object(g.jsxs)(U.a,{className:"bold",children:[71,"\xba"]})]}),Object(g.jsxs)(E.a,{children:[Object(g.jsx)(U.a,{children:"Humidity:"}),Object(g.jsxs)(U.a,{className:"bold",children:[40,"%"]})]})]})]}))};!function(e){e.currency="currency",e.decimal="decimal",e.percent="percent"}(G||(G={}));var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.decimal,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Number(e).toLocaleString(void 0,{style:t,useGrouping:n,minimumFractionDigits:c,maximumFractionDigits:c})},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat(B(e,G.decimal,t),"\xba")},R=["className"];var F=function(e){var t=e.className,c=Object(P.a)(e,R),a=Object(n.useState)(),r=Object(O.a)(a,2),s=r[0],i=r[1],o=function(){fetch("https://us-central1-smart-thermostat-92710.cloudfunctions.net/app/api/weather").then((function(e){return e.json()})).then((function(e){return i(e)})).catch((function(){return console.error("Error updating weather")}))};return Object(n.useEffect)((function(){return o()}),[]),Object(g.jsxs)(A.a,Object(I.a)(Object(I.a)({className:"content-card ".concat(t)},c),{},{children:[Object(g.jsx)(A.a.Header,{children:"Outdoor"}),Object(g.jsxs)(A.a.Body,{children:[Object(g.jsxs)(E.a,{children:[Object(g.jsx)(U.a,{children:"Feels Like:"}),Object(g.jsx)(U.a,{className:"bold",children:(null===s||void 0===s?void 0:s.feelsLike)?H(s.feelsLike):"\u2013"})]}),Object(g.jsxs)(E.a,{children:[Object(g.jsx)(U.a,{children:"Temperature:"}),Object(g.jsx)(U.a,{className:"bold",children:(null===s||void 0===s?void 0:s.temperature)?H(s.temperature):"\u2013"})]}),Object(g.jsxs)(E.a,{children:[Object(g.jsx)(U.a,{children:"Humidity:"}),Object(g.jsx)(U.a,{className:"bold",children:(null===s||void 0===s?void 0:s.humidity)?B(s.humidity/100,G.percent,0):"\u2013"})]})]})]}))};var q=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(T,{}),Object(g.jsxs)("div",{className:"dashboard-cards-container",children:[Object(g.jsx)(_,{className:"mt-3"}),Object(g.jsx)(F,{className:"mt-3"})]})]})};var z=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Schedule"}),Object(g.jsx)("p",{children:"This is the schedule page"})]})},M=c(95),K=function(){j.signOut()},V=c(97),J=c(99),Y=c(96),Z=["buttonText","showLoading","onClick"];var Q,W=function(e){var t=e.buttonText,c=e.showLoading,n=e.onClick,a=Object(P.a)(e,Z);return Object(g.jsx)(M.a,Object(I.a)(Object(I.a)({disabled:c,onClick:n},a),{},{children:c?Object(g.jsx)(Y.a,{animation:"border",as:"span",size:"sm"}):t}))};!function(e){e.auth="auth",e.user="user"}(Q||(Q={}));var X=function(e){var t=$[e.code];return null!==t&&void 0!==t?t:e.message.replace("Firebase: ","").replace(" (".concat(e.code,")"),"")},$={"auth/email-already-exists":"An account already exists with this email.","auth/requires-recent-login":"Please sign out then sign back in to perform this action","auth/invalid-password":"This password is invalid.","auth/invalid-email":"Email address is invalid","auth/user-not-found":"Account does not exist for this email address","auth/wrong-password":"Incorrect password"};var ee=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),c=Object(n.useState)(!1),a=Object(O.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(O.a)(i,2),d=o[0],l=o[1],u=Object(n.useState)(),h=Object(O.a)(u,2),m=h[0],x=h[1],v=function(){var c,n,a=!!(null===(c=e.current)||void 0===c?void 0:c.value)&&!!(null===(n=t.current)||void 0===n?void 0:n.value);!a&&x(""),l(a)};return Object(g.jsxs)(V.a,{onSubmit:function(c){var n,a;c.preventDefault(),s(!0),x("");var r,i=null===(n=e.current)||void 0===n?void 0:n.value,o=null===(a=t.current)||void 0===a?void 0:a.value;i&&i===o?(r=i,j.currentUser?Object(b.e)(j.currentUser,r):Promise.reject()).then((function(){return c.target.reset()})).catch((function(e){(function(e){return e.code===b.a.CREDENTIAL_TOO_OLD_LOGIN_AGAIN})(e)&&console.log("SIGN IN AGAIN"),x(X(e))})).finally((function(){return s(!1)})):(x("Passwords do not match"),s(!1))},children:[Object(g.jsxs)(V.a.Group,{children:[Object(g.jsx)(V.a.Label,{children:"New Password"}),Object(g.jsx)(V.a.Control,{ref:e,type:"password",onChange:v,disabled:r,placeholder:"New Password"}),Object(g.jsx)(V.a.Control,{ref:t,type:"password",onChange:v,disabled:r,placeholder:"Confirm New Password",className:"mt-2"})]}),m&&Object(g.jsx)(J.a,{className:"mt-2 mb-0",variant:"danger",children:m}),Object(g.jsx)(W,{className:"mt-3 w-100",buttonText:"Change Password",showLoading:r,hidden:!d,type:"submit"})]})};var te=function(){var e=Object(n.useContext)(ce),t=e.user,c=e.updateUser,a=Object(n.useRef)(null),r=Object(n.useRef)(null),s=Object(n.useState)(0),i=Object(O.a)(s,2),o=i[0],d=i[1],l=Object(n.useState)(!1),u=Object(O.a)(l,2),h=u[0],m=u[1],x=Object(n.useState)(!1),v=Object(O.a)(x,2),f=v[0],p=v[1],N=Object(n.useState)(),w=Object(O.a)(N,2),S=w[0],y=w[1];Object(n.useEffect)((function(){return m(o>0)}),[o]);var C=function(){var e,c,n=(null===(e=a.current)||void 0===e?void 0:e.value)!==t.name||(null===(c=r.current)||void 0===c?void 0:c.value)!==t.email;!n&&y(""),p(n)};return Object(g.jsxs)(V.a,{onSubmit:function(e){var n,s;e.preventDefault(),y("");var i,o,l=null===(n=a.current)||void 0===n?void 0:n.value,u=null===(s=r.current)||void 0===s?void 0:s.value;if(l&&l!==t.name&&(d((function(e){return++e})),(i=l,j.currentUser?Object(b.f)(j.currentUser,{displayName:i}):Promise.reject()).then((function(){c()})).catch((function(e){y(X(e))})).finally((function(){return d((function(e){return--e}))}))),void 0!==u&&u!==t.email){if(d((function(e){return++e})),""===u)return y("You must provide a valid email"),void d((function(e){return--e}));(o=u,j.currentUser?Object(b.d)(j.currentUser,o):Promise.reject()).then((function(){c()})).catch((function(e){y(X(e))})).finally((function(){return d((function(e){return--e}))}))}},noValidate:!0,children:[Object(g.jsxs)(V.a.Group,{children:[Object(g.jsx)(V.a.Label,{children:"Name"}),Object(g.jsx)(V.a.Control,{ref:a,type:"text",defaultValue:t.name||"",placeholder:"Name",onChange:C,disabled:h})]}),Object(g.jsxs)(V.a.Group,{children:[Object(g.jsx)(V.a.Label,{children:"Email"}),Object(g.jsx)(V.a.Control,{ref:r,type:"email",defaultValue:t.email||"",placeholder:"Email",onChange:C,disabled:h}),Object(g.jsx)(V.a.Text,{children:"This email used for account sign in"})]}),S&&Object(g.jsx)(J.a,{className:"mt-2 mb-0",variant:"danger",children:S}),Object(g.jsx)(W,{className:"mt-3 w-100",buttonText:"Save Changes",showLoading:h,hidden:!f,type:"submit"})]})};var ce,ne=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Settings"}),Object(g.jsxs)(A.a,{className:"content-card",children:[Object(g.jsx)(A.a.Header,{children:"Account"}),Object(g.jsx)(A.a.Body,{children:Object(g.jsx)(te,{})})]}),Object(g.jsxs)(A.a,{className:"content-card mt-4",children:[Object(g.jsx)(A.a.Header,{children:"Change Password"}),Object(g.jsx)(A.a.Body,{children:Object(g.jsx)(ee,{})})]}),Object(g.jsx)("hr",{className:"mt-5 mb-3"}),Object(g.jsx)(M.a,{variant:"secondary",className:"w-100",onClick:K,children:"Sign Out \xa0\u2192"}),Object(g.jsx)(M.a,{variant:"outline-secondary",className:"w-100 mt-2",onClick:function(){return location.reload()},children:"Reload App"})]})};var ae=function(e){var t=Object(n.useState)(e.user),c=Object(O.a)(t,2),r=c[0],s=c[1],i=function(){var e=h(j.currentUser);e&&s(e)};return ce=a.a.createContext({user:r,updateUser:i}),Object(g.jsx)(ce.Provider,{value:{user:r,updateUser:i},children:Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(w.HashRouter,{basename:"/",children:[Object(g.jsx)(N,{}),Object(g.jsx)(S.g,{children:Object(g.jsxs)(m.a,{className:"pb-5",children:[Object(g.jsx)(S.d,{exact:!0,path:p.dashboard,component:q}),Object(g.jsx)(S.d,{exact:!0,path:p.schedule,component:z}),Object(g.jsx)(S.d,{exact:!0,path:p.settings,component:ne}),Object(g.jsx)(S.d,{exact:!0,path:p.signIn,children:Object(g.jsx)(S.c,{to:p.dashboard})}),Object(g.jsx)(S.d,{exact:!0,path:"/",children:Object(g.jsx)(S.c,{to:p.dashboard})})]})})]})})})};c(91);function re(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),s=Object(O.a)(r,2),i=s[0],d=s[1],l=Object(n.useState)(),u=Object(O.a)(l,2),b=u[0],h=u[1],m=Object(n.useState)(!1),x=Object(O.a)(m,2),v=x[0],f=x[1];return Object(g.jsxs)(V.a,{onSubmit:function(e){e.preventDefault(),h(""),c&&i?(f(!0),function(e,t){return Object(o.b)(j,e,t).then((function(){return Promise.resolve()}))}(c,i).catch((function(e){h(X(e)),f(!1)}))):h("Please enter all required fields")},children:[Object(g.jsxs)(V.a.Group,{children:[Object(g.jsx)(V.a.Label,{children:"Username"}),Object(g.jsx)(V.a.Control,{type:"text",onChange:function(e){return a(e.target.value)}})]}),Object(g.jsxs)(V.a.Group,{children:[Object(g.jsx)(V.a.Label,{children:"Password"}),Object(g.jsx)(V.a.Control,{type:"password",onChange:function(e){return d(e.target.value)}})]}),b&&Object(g.jsx)(J.a,{variant:"secondary",className:"mt-3",children:b}),Object(g.jsx)(W,{type:"submit",className:"mt-3 w-100",buttonText:"Sign In",showLoading:v})]})}function se(){return Object(g.jsxs)(A.a,{className:"signin-card shadow mx-auto",children:[Object(g.jsx)(A.a.Header,{children:"Sign In"}),Object(g.jsx)(A.a.Body,{children:Object(g.jsx)(re,{})})]})}var ie=function(){return Object(g.jsx)("div",{className:"app-unauthorized",children:Object(g.jsx)(m.a,{children:Object(g.jsx)(w.HashRouter,{basename:"/",children:Object(g.jsx)(S.g,{children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)(S.d,{exact:!0,path:p.signIn,component:se}),Object(g.jsx)(S.c,{push:!0,to:p.signIn})]})})})})})};j.onAuthStateChanged((function(e){var t=h(e);t?s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(ae,{user:t})}),document.getElementById("root")):s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(ie,{})}),document.getElementById("root"))}))}},[[92,1,2]]]);
//# sourceMappingURL=main.42f9b9e8.chunk.js.map